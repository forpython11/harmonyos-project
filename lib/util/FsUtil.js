"use strict";var e=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(c,a){function i(e){try{d(n.next(e))}catch(e){a(e)}}function u(e){try{d(n.throw(e))}catch(e){a(e)}}function d(e){var t;e.done?c(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,u)}d((n=n.apply(e,t||[])).next())}))},t=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.FsUtil=void 0;const r=t(require("fs")),n=t(require("fs-extra")),c=t(require("rimraf")),a=t(require("symlink-dir")),i=t(require("../log")),u=t(require("json5"));exports.FsUtil={createDirIfNotExists:function(e){r.default.existsSync(e)||n.default.mkdirpSync(e)},createFileSync:n.default.createFileSync,writeFileSync:r.default.writeFileSync,rmDirSync:c.default.sync,rmEmptyDirSync:function(e){if(!r.default.existsSync(e))return;0===r.default.readdirSync(e).length&&(r.default.rmdirSync(e),i.default.debug("",`Deleted empty directory ${e}`))},rmSync:r.default.rmSync,readdirSync:r.default.readdirSync,existsSync:r.default.existsSync,statSync:r.default.statSync,readFileSync:r.default.readFileSync,copyFileSync:r.default.copyFileSync,copySync:n.default.copySync,unlinkSync:r.default.unlinkSync,realpath:n.default.realpath,renameSync:r.default.renameSync,symLinkDir:function(t,r){return e(this,void 0,void 0,(function*(){const e=yield(0,a.default)(t,r);e.reused||i.default.debug("",`symlinkDir ${r} to ${t}`),e.warn&&i.default.warn("",e.warn)}))},readJSONSync:function(e,t){try{return n.default.readJSONSync(e,t)}catch(t){const r=`${t.message} - check ${e} format.`;throw i.default.error("",r),new Error(r)}},readJSON5Sync:function(e,t=""){try{const t=r.default.readFileSync(e,"utf8");return u.default.parse(t)}catch(r){const n=`${r.message} - check ${t||e} format.`;throw i.default.error("",n),new Error(n)}}};