"use strict";var e=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(i,c){function a(e){try{s(o.next(e))}catch(e){c(e)}}function r(e){try{s(o.throw(e))}catch(e){c(e)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,r)}s((o=o.apply(e,t||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.updateSymlink=void 0;const t=require("../common/definitions"),n=require("../../../util"),o=require("./common"),i=require("./install"),c=require("../../package/PackageLock");exports.updateSymlink=function(a){return e(this,void 0,void 0,(function*(){const e=process.cwd(),r=(new Date).getTime(),s=yield(0,o.getRootNode)(e,t.defaultInstallOptions,a);if(c.PackageLock.initLockJson(e),a&&0!==a.length)for(const e of a)s.children.forEach((t=>{if(t.name===e){const n=`${e}@${t.fetchSpec}`;c.PackageLock.deleteSpec(n)}}));else c.PackageLock.clearSpecifiers();yield(0,i.commonInstall)(e,s),yield(0,o.updatePkgJson)(e,s.packageJson,t.defaultInstallOptions),n.PrintUtil.printCostTime(r)}))};