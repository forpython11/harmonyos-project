"use strict";var t=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))((function(o,r){function u(t){try{a(i.next(t))}catch(t){r(t)}}function s(t){try{a(i.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(u,s)}a((i=i.apply(t,e||[])).next())}))},e=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.init=void 0;const n=require("../../util"),i=e(require("path")),o=require("./util"),r=e(require("./interactiveInput")),u=require("../../common/Constants"),s=e(require("../../log")),a={name:"",version:"1.0.0",description:"",main:"index.ets",author:"",license:"ISC",dependencies:{}};exports.init=function(e){return t(this,void 0,void 0,(function*(){const c=process.cwd(),l=c.split(i.default.sep);let d=l[l.length-1].toLowerCase();const f=i.default.join(c,u.Constants.MyPackageJson);if(n.FsUtil.existsSync(f)&&(d=n.FsUtil.readJSON5Sync(f).name||d),e.group){if(!(0,o.validateGroup)(e.group))return;if(e.group.length>36)return void s.default.error("","Group name cannot contain more than 36 characters.");d.startsWith("@")&&d.includes("/")&&(d=d.split("/")[1]),d=`@${e.group}/${d}`}e.yes?function(t){const e=(0,o.validateNameFun)(t);if(!e)return;a.name=e;const r=JSON.stringify(a,null," "),s=i.default.join(process.cwd(),u.Constants.MyPackageJson);(0,o.output)(`Wrote to ${s}:\n`),(0,o.output)(`${r}\n\n`),n.FsUtil.writeFileSync(s,r)}(d):yield function(e){return t(this,void 0,void 0,(function*(){yield(0,r.default)(e)}))}(d)}))};