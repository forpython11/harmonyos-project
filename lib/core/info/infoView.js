"use strict";var e=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.infoView=void 0;const t=require("cli-columns"),i=require("../package/util"),a=e(require("chalk")),n=e(require("dayjs")),u=e(require("dayjs/plugin/relativeTime"));function l(e){const t=new Date(e).toLocaleString(),i=(0,n.default)(t).format("YYYY-MM-DD HH:mm:ss");return(0,n.default)(i).fromNow()}function r(e){return e.name+(e.email?` <${e.email}>`:"")+(e.url?` (${e.url})`:"")}n.default.extend(u.default),exports.infoView=function(e,n,u,d,s){var o;const p=[];var c;Object.keys(u).forEach((e=>{const t=u[e];p.push(`${a.default.whiteBright(a.default.green(e))}: ${t}`)}));const f=function(e,t,i,n,u,d){return{name:a.default.green(e.name),version:a.default.green(e.version),versions:a.default.yellow(`${t.length}`),description:e.description,deprecated:e.deprecated,keywords:(e.keywords||[]).map((e=>a.default.yellow(e))),license:e.license||"Proprietary",deps:Object.keys(e.dependencies||{}).map((t=>`${a.default.yellow(t)}: ${e.dependencies[t]}`)),publisher:e.author&&r({name:e.author.name?a.default.yellow(e.author.name):"",email:e.author.email?a.default.cyan(e.author.email):""}),modified:i?a.default.yellow(l(i[e.version])):void 0,maintainers:(n||e.maintainers||[]).map((e=>r({name:e.name?a.default.yellow(e.name):"",email:e.email?a.default.cyan(e.email):""}))),repo:e.bugs&&e.bugs.url||e.repository&&e.repository.url,site:e.homepage,tags:d,tarball:a.default.cyan(e.dist.tarball),shasum:e.dist.shasum?a.default.yellow(e.dist.shasum):void 0,integrity:e.dist.integrity&&a.default.yellow(e.dist.integrity),fileCount:e.dist.fileCount&&a.default.yellow(e.dist.fileCount),unpackedSize:u&&`${a.default.yellow(u.value)} ${u.unit}`}}(e,d,n,s,(null===(o=e.dist)||void 0===o?void 0:o.unpackedSize)&&((c=e.dist.unpackedSize)<1e3?{value:c,unit:"B"}:c<1e6?{value:(c/1e3).toFixed(1),unit:"KB"}:c<1e9?{value:(c/1e6).toFixed(1),unit:"MB"}:{value:(c/1e9).toFixed(1),unit:"GB"}),p);"proprietary"===f.license.toLowerCase().trim()?f.license=a.default.whiteBright(a.default.red(f.license)):f.license=a.default.green(f.license);const m=a.default.underline(a.default.whiteBright(`${f.name}@${f.version}`)),h=f.deps.length?a.default.cyan(f.deps.length):a.default.green("none");if((0,i.output)(`\n${m} | ${f.license} | deps: ${h} | versions: ${f.versions}`),f.description&&(0,i.output)(f.description),(f.repo||f.site)&&f.site&&(0,i.output)(a.default.cyan(f.site)),f.deprecated&&(0,i.output)(`\n${a.default.whiteBright(a.default.red("DEPRECATED"))}!! - ${f.deprecated}`),f.keywords.length&&(0,i.output)(`\nkeywords: ${f.keywords.join(", ")}`),(0,i.output)("\ndist"),f.shasum?(0,i.output)(`.tarball: ${f.tarball}\n.shasum: ${f.shasum}`):(0,i.output)(`.tarball: ${f.tarball}`),f.integrity&&(0,i.output)(`.integrity: ${f.integrity}`),f.unpackedSize&&(0,i.output)(`.unpackedSize: ${f.unpackedSize}`),f.deps.length&&((0,i.output)(`\ndependencies:\n${t(f.deps.slice(0,24),{padding:1})}`),f.deps.length>24&&(0,i.output)(`(...and ${f.deps.length-24} more.)`)),f.maintainers&&f.maintainers.length&&((0,i.output)("\nmaintainers:"),f.maintainers.forEach((e=>(0,i.output)(`-${e}`)))),(0,i.output)(`\ndist-tags: \n${t(f.tags)}`),f.publisher||f.modified){let e="published";f.modified&&(e+=` ${f.modified}`),f.publisher&&(e+=` by ${f.publisher}`),(0,i.output)(`\n${e}`)}};