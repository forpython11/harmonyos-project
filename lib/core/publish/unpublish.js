"use strict";var e=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),t=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(r){if(r&&r.__esModule)return r;var i={};if(null!=r)for(var n in r)"default"!==n&&Object.prototype.hasOwnProperty.call(r,n)&&e(i,r,n);return t(i,r),i},i=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(n,o){function u(e){try{c(i.next(e))}catch(e){o(e)}}function s(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(u,s)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.unpublish=void 0;const n=r(require("../registry/registry")),o=require("../../util"),u=require("../../common/Constants");exports.unpublish=function(e,t){return i(this,void 0,void 0,(function*(){let r="";const i="@"===e[0]?e.slice(1).indexOf("@")+1:e.indexOf("@");let s=i>0?e.slice(0,i):e;if(i>0&&(r=e.slice(i+1)),!r&&!t.force)throw new Error("Refusing to delete entire project - run with --force to do this.");let c=n.getPublishRegistry();if(void 0!==t.publish_registry&&(c=t.publish_registry),null==c||!c.length)throw new Error(`The publish_registry url is empty - use "${u.Constants.PM} config set publish_registry your_publish_registry" command to set the url.`);c.endsWith("/")||(c=c.concat("/")),s=s.replace("/","%2f"),yield n.unpublishPackage(s,r,c),(0,o.output)("Unpublish end")}))};