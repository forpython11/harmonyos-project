"use strict";var t=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{u(r.next(t))}catch(t){o(t)}}function a(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((r=r.apply(t,e||[])).next())}))},e=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.uninstallCmd=void 0;const n=require("../core/install"),r=require("../common/message"),i=require("../util"),o=e(require("../log")),s=require("../core/scripts/ScriptRunner"),a=require("../common/GlobalState");exports.uninstallCmd=function(e,u){return t(this,void 0,void 0,(function*(){a.GlobalState.command=a.CommandType.UNINSTALL;try{if(!e||0===e.length)return void o.default.error("",(0,r.getMessage)("uninstall.noPkg"));for(const t of e){const e=i.PackageUtil.parse(t);if(e.version)return void o.default.error("",(0,r.getMessage)("uninstall.hasVersion",{version:e.version}))}s.ScriptRunner.runHook(s.ScriptConstants.preUninstall),yield(0,n.uninstallSymlink)(e,u),s.ScriptRunner.runHook(s.ScriptConstants.postUninstall)}catch(t){i.PrintUtil.print((0,r.getMessage)("uninstall.fail")),process.exit(1)}}))};